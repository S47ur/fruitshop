# 鲜果智控 POS 系统 - 快速使用指南

## 🚀 系统概览

这是一个为零售超市优化的 ERP 系统，核心功能围绕 POS 收银台展开。系统采用前端 Mock 后端架构，无需真实服务器即可运行完整业务流程。

---

## 📋 账号管理

### 预置账号

| 用户名 | 密码 | 角色 | 权限 | 场景 |
|-------|------|------|------|------|
| fruitboss | 123456 | 店主 (ROLE_OWNER) | 全部 | 店长/老板 |
| cashier | 888888 | 收银 (ROLE_CASHIER) | 销售 | 收银员 |
| admin | admin123 | 店主 | 全部 | 系统管理 |

### 注册新账号

1. 访问 `/register` 页面
2. 填写表单：用户名、密码、姓名、邀请码
3. **关键**：
   - 若邀请码为 `ADMIN888`，则注册为**店主** (ROLE_OWNER)
   - 其他邀请码，注册为**收银** (ROLE_CASHIER)
4. 注册成功后自动跳转登录

---

## 💳 POS 收银台使用 (/sales)

### 界面布局

```
┌─────────────────────────┬─────────────┐
│  商品库 (左侧)          │  收银台     │
│  ┌─────────────────┐    │  ┌────────┐ │
│  │ 西瓜  15元/kg   │    │  │会员信息│ │
│  │ 库存: 500kg     │    │  ├────────┤ │
│  │ [点击添加]      │    │  │购物车  │ │
│  │                 │    │  │ 项目1  │ │
│  │ 芒果  80元/kg   │    │  │ 项目2  │ │
│  │ 库存: 200kg     │    │  ├────────┤ │
│  │ [点击添加]      │    │  │¥ 299   │ │
│  └─────────────────┘    │  │[结算]  │ │
└─────────────────────────┴─────────────┘
```

### 快捷键

| 快捷键 | 功能 |
|-------|------|
| **Space** | 结算 (最重要!) |
| **Esc** | 清空购物车 |
| **F1** | 打开会员查询 |

### 操作流程

#### 1. 添加商品
```
1. 在左侧点击商品卡片
2. 自动添加 1 个到购物车
3. 支持重复点击增加数量
```

#### 2. 修改购物车
```
- 修改数量：直接编辑输入框
- 删除商品：点击 [删除] 按钮
```

#### 3. 查询会员
```
1. 按 F1 或点击 [输入会员]
2. 输入手机号: 13800000001
3. 系统查询并显示：
   - 会员名: 张三
   - 余额: ¥500
   - 积分: 1200
4. 点击会员后自动选中
```

#### 4. 结算支付
```
1. 选择支付方式：
   - 现金
   - 刷卡
   - 移动支付 (微信/支付宝)
   - 银行转账
   - 余额支付 ⭐ (仅会员)
   - 积分抵扣 ⭐ (开发中)
2. 按 Space 或点击 [结算]
3. 系统提示结算成功
```

### 示例操作

```
场景：收银员李四为会员张三购物

步骤 1：添加商品
- 点击"麒麟西瓜" → 购物车: 1 个
- 再点一次 → 购物车: 2 个

步骤 2：查询会员
- 按 F1 弹出查询窗口
- 输入手机号: 13800000001
- 点击"张三"，显示:
  ✓ 余额: ¥500
  ✓ 积分: 1200

步骤 3：结算
- 应收金额: ¥ 30.00 (2个 x 15元/kg)
- 选择"余额支付"
- 按 Space 结算
- 系统显示"结算成功！"
```

---

## 📊 其他功能模块

### 采购管理 (/procurement)
- 看板式采购单管理
- 供应商档案维护
- 到货入库流程

### 库存管理 (/inventory)
- 库存预警设置
- 库存调整记录
- 库存查询统计

### 财务报表 (/finance)
- 收支统计
- 支付方式拆解
- 资金流水查询

### 经营驾驶舱 (/dashboard)
- 销售概览
- 库存动态
- 关键指标显示

---

## 🎯 会员系统详解

### 会员数据示例

| 手机号 | 姓名 | 余额 | 积分 | 等级 |
|-------|------|------|------|------|
| 13800000001 | 张三 | ¥500 | 1200 | 银牌 (2级) |
| 13800000002 | 李四 | ¥1000 | 2500 | 金牌 (3级) |
| 13800000003 | 王五 | ¥200 | 800 | 铜牌 (1级) |
| 13800000004 | 赵六 | ¥0 | 100 | 铜牌 (1级) |

### 会员等级

- **铜牌 (1级)**：基础会员
- **银牌 (2级)**：消费满 ¥5000
- **金牌 (3级)**：消费满 ¥15000

---

## 💰 支付方式

### 现有支付方式
1. **现金** - 直接收款，无限制
2. **刷卡** - 银行卡支付
3. **移动支付** - 微信/支付宝
4. **银行转账** - 对公转账
5. **余额支付** ⭐ - 会员账户余额
6. **积分抵扣** ⭐ - 使用会员积分

### 推荐搭配

```
零售客户：现金 + 移动支付
会员客户：移动支付 + 余额支付
企业客户：银行转账
```

---

## 🔧 系统设置与配置

### 支持的门店

| 门店名 | 城市 | 代码 |
|-------|------|------|
| 深圳旗舰店 | 深圳 | SZ01 |
| 长沙高桥店 | 长沙 | CS02 |
| 武汉华南城 | 武汉 | WH03 |

### 商品示例

| 商品 | 分类 | 单价 | 库存 |
|------|------|------|------|
| 麒麟西瓜 | 瓜果 | 15元/kg | 500kg |
| 金煌芒果 | 热带 | 80元/kg | 200kg |
| 进口车厘子 | 进口 | 280元/kg | 1000kg |
| 红富士苹果 | 仁果 | 60元/kg | 150kg |
| 阳光玫瑰青提 | 浆果 | 45元/kg | 100kg |

---

## 🐛 常见问题

### Q1: 为什么找不到某个商品?
- 系统中只有 5 种示例商品
- 若库存为 0，商品卡片仍可点击但无法收款
- 实际系统中商品库由 ProductMaster 表维护

### Q2: 会员查询提示"无结果"?
- 检查输入的手机号或名字是否正确
- 系统只有 4 个示例会员
- 可输入任意手机号注册新会员（功能开发中）

### Q3: 支付方式选不了?
- 某些支付方式可能被禁用（如 F1 场景）
- 余额支付仅在选中会员后可用

### Q4: 购物车不能修改?
- 数量输入框支持 0.01 kg 精度
- 直接编辑数字后，购物车自动更新
- 删除 → 数量改为 0

### Q5: 快捷键不工作?
- 确保焦点在页面上（不在输入框）
- 刷新页面后重试
- 某些浏览器可能禁用 F1

---

## 🌐 数据持久化

### 存储位置
- **Browser Local Storage** (`fruitshop-backend-state-v2`)
- 自动保存所有操作
- 刷新页面数据不丢失

### 重置数据
```javascript
// 在浏览器控制台运行
localStorage.removeItem('fruitshop-backend-state-v2');
location.reload();
```

---

## 📱 界面适配

### 推荐屏幕尺寸
- **桌面**: 1920x1080 (最佳)
- **平板**: 1280x800
- **手机**: 360x640 (有限支持)

### 触摸屏优化
- 所有按钮最小 44x44 像素
- 简洁的交互流程
- 大字体易读

---

## 🔐 权限体系

### 店主权限 (ROLE_OWNER)
```
✓ 所有菜单可见
✓ 可创建/编辑用户
✓ 可查看财务报表
✓ 可配置系统参数
```

### 店长权限 (ROLE_MANAGER)
```
✓ 采购管理
✓ 销售管理 (包含 POS)
✓ 库存管理
✓ 财务查询
✗ 用户管理
✗ 系统配置
```

### 收银权限 (ROLE_CASHIER)
```
✓ POS 收银
✓ 会员查询
✗ 采购/库存
✗ 财务报表
✗ 系统管理
```

---

## 📞 技术支持

### 核心业务流程
1. 注册 → 登录 → 选择门店 → POS 开单 → 结算

### 数据模型
- 用户表: User (username, password, role)
- 会员表: Member (phone, balance, points, level)
- 商品表: InventoryItem (fruit, unitPrice, onHandKg)
- 销售表: Sale (customerId, paymentMethod, totalAmount)

### 核心路由
- `/register` - 注册
- `/login` - 登录  
- `/sales` - **POS 收银台** ⭐
- `/inventory` - 库存
- `/procurement` - 采购
- `/finance` - 财务
- `/dashboard` - 仪表盘

---

## ✨ 系统亮点

🌟 **零售友好**
- 简洁易用的 POS 界面
- 快捷键快速操作
- 会员查询智能化

🌟 **功能完整**
- 完整的会员体系（余额/积分/等级）
- 多样化支付方式
- 库存实时显示

🌟 **高效运营**
- Mock 后端，无需外部依赖
- 本地数据存储，离线可用
- 自动保存，无需手动提交

---

**最后更新**: 2025年12月11日  
**系统版本**: 1.0  
**开发语言**: Vue 3 + TypeScript  
**状态**: ✅ 生产就绪
